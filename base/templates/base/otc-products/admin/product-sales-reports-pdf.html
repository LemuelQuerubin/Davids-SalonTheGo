{% load static %}
<html>
<head>
    <title>PRODUCT SALES REPORT</title>
    <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <meta charset="UTF-8">
</head>
<body>
    <style>       
        table{
            border: 1px solid black;
        }

        th{
            font-weight: 700;
            font-size: 13px;
            height: 45px;   
            background-color:  #092147;
            padding-top: 5px;
            color: white;
        }

        td{
            text-align: center;   
            height: 75px;   
            font-size: 12px; 
            padding-top: 5px;
        }

        h1{
            font-size: 20px;
            color: #001D6E;

        }

        .order{
            font-size:12px;
        }

        #orders{
            width: 15%;
        }
       

    </style>
    
    <div class ="main">  
        <!-- COPY FOR LETTERHEAD -->
        <div class="main">    
            <table style="border: 1px solid #092147;background-color: #092147; color: white;">
                <thead>
                    <tr>
                        <!-- DATE, TIME, HEADER WITH ADDRESS -->
                        <td style="
                        font-size: 20px;
                        height: 40px;">                
                            DAVID'S SALON SM GRAND CENTRAL BRANCH
                        </td>
                    </tr>
                    <tr>
                        <td style="
                        font-size: 12px;
                        height: 70px;">
                            5th Level SM City Grand Central, Rizal Avenue Extension <br> East Grace Park, Caloocan, 1403 Metro Manila <br>Cel. (+63) 905 931 6531 / (+63) 995 664 2394
                        </td>
                        <!-- END OF DATE, TIME, HEADER WITH ADDRESS -->
                    </tr>
                </thead>
            </table>
            <br>
            <!-- REPORT HEADER -->
            <h1>PRODUCT RESERVATION SALES REPORT<hr></h1>
        
        <!-- END OF COPY FOR LETTERHEAD -->
            <table style="border: 1px transparent;">
                <tbody>
                    <tr>
                        <!-- DATE AND TIME GENERATED -->
                        <td style="
                        text-align: left;
                        font-size: 12px;
                        height: 80px;">
                            <b>Date Generated:</b>&nbsp;&nbsp;{{ current_datetime|date:'F m, Y | l' }}
                            <br>
                            <b>Time Generated:</b>&nbsp;&nbsp;{{ current_datetime|time:'f:s A' }}
                            <br>
                            <!-- GENERATED BY -->
                            <b>Generated by:</b>&nbsp;&nbsp;
                            {% for users in user %}
                                {{ users.first_name }}
                                {{ users.last_name }}
                                ({{ users.admin.stafftype }})
                            {% endfor %}
                        </td>
                    </tr>
                </tbody>
            </table>
        
            <br>
        
            <!-- END OF REPORT HEADER -->
        <table>
            <thead>
                <tr>
                    <td>Total Products Sold</td>
                    <td>Total No. of Distinct Customers</td>
                    <td>Total Store Earnings</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{products_sold}}</td>
                    <td>{{ cust_count }}</td>
                    <td>PHP {{ total_sales.total|floatformat:2  }}</td>
                </tr>
            </tbody>
        </table>
        <br>
        <table class="products-table">
            <thead class="products-thead">
                <tr>
                    <!-- TABLE HEADER -->
                    <th scope="col">Customer</th>
                    <th scope="col">Transaction ID</th>
                    <th scope="col">Date Ordered</th>
                    
                    <th scope="col">Order</th>
                    <th scope="col">Pickup Date</th>
                    <th scope="col">Total</th>
                </tr>
            </thead>

            <tbody class="products-tbody">
                {% for orderpickup in page_prod %}
                    {% if orderpickup.order.complete == True %}
                    {% if orderpickup.order.pickupstat_id == 'Transaction Successful' %}
                    <tr>
                        <!-- TABLE BODY -->
                        <td data-label="Customer">{{orderpickup.order.customer}}</td>
                        <td data-label="Transaction ID" id="transaction-style">{{orderpickup.order.transaction_id}}</td>
                        <td data-label="Date Ordered">{{orderpickup.order.date_ordered}}</td>
                        <td id="orders" data-label="Order">
                            {% for item in items %}
                                {% if item.order.id == orderpickup.order.id %}
                                    {{ item.product }} x {{ item.quantity }}<br>
                                {% endif %}
                            {% endfor %}
                        </td>
                        <td data-label="Pickup Date">{{orderpickup.pickup}}</td>     
                        <td data-label="Total" id="price">PHP {{orderpickup.order.get_cart_total}}</td>                
                    {% endif %}
                    {% endif %}
                   
                    {% empty %}
                    <td colspan="7">No results found.</td>
                </tr>
            {% endfor %}
                        
                       
                    </tr>
            
            </tbody>
        </table>
</div>

