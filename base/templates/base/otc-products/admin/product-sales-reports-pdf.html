{% load static %}
<html>
<head>
    <title>PRODUCT SALES REPORT</title>
    <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <meta charset="UTF-8">
</head>
<body>
    <style>       
        table{
            border: 1px solid black;
        }

        th{
            font-weight: 700;
            font-size: 13px;
            height: 45px;   
            background-color:  #092147;
            padding-top: 5px;
            color: white;
        }

        td{
            text-align: center;   
            height: 75px;   
            font-size: 12px; 
            padding-top: 5px;
        }

        h1{
            font-size: 20px;
        }

        .order{
            font-size:12px;
        }

        #orders{
            width: 15%;
        }
       

    </style>
    
    <div class ="main">
        <u><b>DATE:</b> {{ current_datetime|date:'F m, Y | l' }}</i></u><br>
        <u><b>TIME:</b> {{ current_datetime|time:'f:s A' }}</i></u><br>
        
        
        <br>
        <center>
            <h1>PRODUCT RESERVATION SALES REPORT</h1>
            {% comment %} DATE START: <i>insert date range here</i>
            DATE END: <i>insert date range here</i> {% endcomment %}
        </center>
        <table>
            <thead>
                <tr>
                    <td>Total Products Sold</td>
                    <td>Total No. of Distinct Customers</td>
                    <td>Total Store Earnings</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{products_sold}}</td>
                    <td>{{ cust_count }}</td>
                    <td>PHP {{ total_sales.total|floatformat:2  }}</td>
                </tr>
            </tbody>
        </table>
        <br>
        <table class="products-table">
            <thead class="products-thead">
                <tr>
                    <!-- TABLE HEADER -->
                    <th scope="col">Customer</th>
                    <th scope="col">Transaction ID</th>
                    <th scope="col">Date Ordered</th>
                    
                    <th scope="col">Order</th>
                    <th scope="col">Pickup Date</th>
                    <th scope="col">Total</th>
                </tr>
            </thead>

            <tbody class="products-tbody">
                {% for orderpickup in page_prod %}
                    {% if orderpickup.order.complete == True %}
                    {% if orderpickup.order.pickupstat_id == 'Transaction Successful' %}
                    <tr>
                        <!-- TABLE BODY -->
                        <td data-label="Customer">{{orderpickup.order.customer}}</td>
                        <td data-label="Transaction ID" id="transaction-style">{{orderpickup.order.transaction_id}}</td>
                        <td data-label="Date Ordered">{{orderpickup.order.date_ordered}}</td>
                        <td id="orders" data-label="Order">
                            {% for item in items %}
                                {% if item.order.id == orderpickup.order.id %}
                                    {{ item.product }} x {{ item.quantity }}<br>
                                {% endif %}
                            {% endfor %}
                        </td>
                        <td data-label="Pickup Date">{{orderpickup.pickup}}</td>     
                        <td data-label="Total" id="price">PHP {{orderpickup.order.get_cart_total}}</td>                
                    {% endif %}
                    {% endif %}
                   
                    {% empty %}
                    <td colspan="7">No results found.</td>
                </tr>
            {% endfor %}
                        
                       
                    </tr>
            
            </tbody>
        </table>
</div>

