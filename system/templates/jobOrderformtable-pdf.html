{% load static %}
<html>
<head>
    <title>JOB ORDER FORMS REPORT</title>
    <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
</head>
<body>
    <style>       
        table{
            border: 1px solid black;
        }

        th{
            font-weight: 700;
            font-size: 13px;
            height: 45px;   
            background-color:  #092147;
            padding-top: 5px;
            color: white;
        }

        td{
            text-align: center;   
            height: 55px;   
            font-size: 12px; 
            padding-top: 5px;
        }

        h1{
            font-size: 20px;
            color: #001D6E;

        }

        p{
            font-size: 13px;
        }
        .stat {
            padding:0;
        }

    </style>
    
    <div class ="main">

<!-- COPY FOR LETTERHEAD -->
<div class="main">    
    <table style="border: 1px solid #092147;background-color: #092147; color: white;">
        <thead>
            <tr>
                <!-- DATE, TIME, HEADER WITH ADDRESS -->
                <td style="
                font-size: 20px;
                height: 40px;">                
                    DAVID'S SALON SM GRAND CENTRAL BRANCH
                </td>
            </tr>
            <tr>
                <td style="
                font-size: 12px;
                height: 70px;">
                    5th Level SM City Grand Central, Rizal Avenue Extension <br> East Grace Park, Caloocan, 1403 Metro Manila <br>Cel. (+63) 905 931 6531 / (+63) 995 664 2394
                </td>
                <!-- END OF DATE, TIME, HEADER WITH ADDRESS -->
            </tr>
        </thead>
    </table>
    <br>
    <!-- REPORT HEADER -->
    <h1>JOB ORDER FORMS REPORT <hr></h1>

<!-- END OF COPY FOR LETTERHEAD -->
    <table style="border: 1px transparent;">
        <tbody>
            <tr>
                <td style="
                text-align: left;
                font-size: 12px;
                height: 80px;">
                    {% if fromdate == '2000-01-01' %}
                        <b>Reports from:</b>&nbsp;&nbsp;{{ earlydate.apptDate|date:'Y-m-d' }} &nbsp;&nbsp;<b>-</b>&nbsp;&nbsp;{{ latedate.apptDate|date:'Y-m-d' }}<br>
                    {% else %}
                        <b>Reports from:</b>&nbsp;&nbsp;{{ fromdate }}&nbsp;&nbsp;<b>-</b>&nbsp;&nbsp;{{ todate }}<br>
                    {% endif %}
                    
                    <!-- GENERATED BY -->
                    <b>Generated by:</b>&nbsp;&nbsp;
                    {% for users in user %}
                        {{ users.first_name }}
                        {{ users.last_name }}
                        ({{ users.admin.stafftype }})
                    {% endfor %}
                </td>
                <!-- DATE AND TIME GENERATED -->
                <td style="
                text-align: left;
                font-size: 12px;
                height: 80px;">
                    <b>Date Generated:</b>&nbsp;&nbsp;{{ current_datetime|date:'F m, Y | l' }}
                    <br>
                    <b>Time Generated:</b>&nbsp;&nbsp;{{ current_datetime|time:'f:s A' }}
                    <br>
                </td>
            </tr>
        </tbody>
    </table>
    <!-- END OF REPORT HEADER -->

    <br>

        <table>
            <thead>
                <tr>
                    <td>Total Services Done</td>
                    <td>Total Customers</td>
                    <td>Total Store Earnings</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ total_services }}</td>
                    <td>{{cust_count }}</td>
                    <td>PHP {{ total_earnings.total|floatformat:2 }}</td>
                </tr>
            </tbody>
        </table>
        
        
        <br>
        
        <table class="products-table">
            <thead class="products-thead">
                <tr>
                    <!-- TABLE HEADER -->
                    <th scope="col">Date</th>
                    <th scope="col">Time</th>
                    <th scope="col">Customer Name</th>
                    <th scope="col">Service/s</th>
                    <th scope="col">Stylist</th>
                    <th scope="col">Total Amount</th>
                </tr>
            </thead>

            <tbody class="products-tbody">
                {% for appointment in appointments %}
                    {% if appointment.appointmentStatus == 'Successful' %}
                    <tr>
                        <td>{{appointment.apptDate|date:'F d, Y'}}</td>
                        <td>{{ appointment.appt_timeStart|time:'h:i A'}}</td>
                        <td>
                        {% if appointment.apptType == 'Online' %}
                            <p>{{ appointment.customer.customer.first_name }} {{ appointment.customer.customer.last_name }} </p>
                        {% else %}
                            <p>{{ appointment.customer_fname }} {{ appointment.customer_lname }} </p>
                        {% endif %}</td>
                        <td>
                            
                            {% for key in appointment.joborderform.servicePrices.keys %}
                                {{ key }}
                                {% if not forloop.last %}
                                <br>
                                {% endif %}
                            {% endfor %}
                                
                        </td>
                        <td>{{ appointment.joborderform.finalStylist }}</td>
                        <td>PHP {{appointment.joborderform.totalPrice }}</td>
                    </tr>
                    {% endif %}
                {% endfor %}
            </tbody>
        </table>

        {% comment %} <br>

        <table class="stat">
            <thead>
                <tr>
                    <th colspan="3">Services Statistics</td>
                </tr>
                <tr>
                    <th>Service Name</th>
                    <th>Service Count</th>
                    <th>Earnings</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>                 
                </tr>
            </tbody>
        </table>
        <br>

        <table>
            <thead>
                <tr>
                    <th colspan="4">Staff Statistics</td>
                </tr>
                <tr>
                    <th>Staff Name</th>
                    <th>Total Customers Served</th>
                    <th>Total Services Done</th>
                    <th>Earnings</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>                    
                </tr>
            </tbody>
        </table> {% endcomment %}
        
        <br>
        
    </div>

</body>
</html>

